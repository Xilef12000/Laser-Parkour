<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Laser-Parkour</title>
</head>
<body>
	<div id="sensors"></div>
</body>
<script type="text/javascript">
	div = document.getElementById('sensors');
	var pollRate = 500;
	const pendingForms = new WeakMap();
	function getAPI() {
		const controller = new AbortController();
		setTimeout(() => controller.abort(), pollRate);
		fetch('http://192.168.4.1/API', { signal: controller.signal })
		.then(response => {
			if (!response.ok) {
				throw new Error('Network response was not ok');
			}
			return response.json();
		})
		.then(data => {
			console.log(data)
			table = '<table>'

			table += '<tr>'
			table += '<th>Addr</th>'
			table += '<th>Type</th>'
			table += '<th>Mode</th>'
			table += '<th>Value</th>'
			table += '<th>conStatus</th>'
			table += '</tr>'

			for (var i in data) {
				table += '<tr>'
				table += '<td>' + data[i].address + '</td>'
				table += '<td>' + data[i].deviceType + '</td>'
				table += '<td>' + data[i].deviceMode + '</td>'
				table += '<td>' + data[i].value + '</td>'
				table += '<td>' + data[i].conStatus + '</td>'
				table += '</tr>'
			}
			table += '</table>'
			div.innerHTML = table

		})
		.catch(error => {
			console.error('Error:', error);
		});
		setTimeout(getAPI, pollRate);
	}
	getAPI()
</script>
</html>